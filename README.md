# 智能BI平台
在本平台中，用户可以上传Excel文件，并给出分析目标、需要的图表类型，平台将生成对应的分析图表以及分析结论。
# 设计
1. 限流：自定义多级别限流器，对不同接口进行有区分的限流，防止攻击对第三方接口的过度调用。
2. 轮转日志：使用 lumberjack 与 zerolog 实现轮转日志。
3. 唯一Token：使用 JWT 和 redis 实现了用户最多只能持有一个有效Token。
4. 自定义业务错误包：将业务上的错误封装到 errs 包，当需要返回错误时可以直接使用，提高了代码的可读性、可维护性。
5. 配置读取：使用 Viper 读取本地配置文件信息；使用环境变量读取敏感的配置项。
6. 用户密码加密：对用户的初始密码进行哈希编码。
7. 跨域：使用 Gin 的官方 CORS 中间件配置跨域信息。
8. 分表存储用户上传的表格数据，并使用预编译SQL建表语句，以防止SQL注入。
9. 缓存图表数据：根据局部性原理，在用户查找图表、图表生成成功时，将图表写入缓存。
10. 提供示例图表接口，可以在不登陆的条件下，查看示例图表，以吸引游客注册并使用。

# 快速开始
1. 安装go(version > 1.23.2)、docker
2. 修改 config/config.yml 和 docker-compose.yml 的配置信息
3. docker-compose up -d
4. 运行编译脚本
5. 配置火山引擎的APIKEY环境变量ARK_API_KEY
6. 运行项目根目录下的应用程序 myapp

# TODO
- [ ] 通过命令行参数进行模式切换，如测试环境、生产环境。
- [ ] 使用消息队列解藕第三方AI接口流程，实现图表生成状态的流转过程。
- [ ] 支持通过链接分享图表内容。
- [ ] 通知功能：当图表生成成功、生成失败时，给用户发送本系统的消息提醒。
- [ ] 使用接口定义第三方服务接口、业务内部分层间的调用，提高扩展性。
- [ ] 当第三方接口调用失败时，实现调用降级。
- [ ] 若用户量大了，考虑将后端架构切换为微服务分布式架构。
